<div class="center_con js-center_con l">
                <div class="article-con">
                                            <!-- 买过的阅读 -->
                        

                    
                    <div class="art-title">
                        18 把盒子升级为豪宅：函数进阶
                    </div>
                    <div class="art-info clearfix">
                        
                        <span class="l">
                            更新时间：2019-09-26 09:49:00
                        </span>
                    </div>
                    <div class="art-top">
                                                <img src="//img3.mukewang.com/5d8acb5e0001e79106340356.jpg" alt="">
                                                                        <div class="famous-word-box">
                            <img src="/static/img/column/bg-l.png" alt="" class="bg1 bg">
                            <img src="/static/img/column/bg-r.png" alt="" class="bg2 bg">
                            <div class="famous-word">不经一翻彻骨寒，怎得梅花扑鼻香。<p class="author">——宋帆</p></div>
                        </div>
                                            </div>
                    <div class="art-content js-lookimg">
                        <div><div class="cl-preview-section"><a id="anchor_0_virtual" class="virtual_anchor"></a><h2 id="位置参数">位置参数</h2>
</div><div class="cl-preview-section"><p>位置参数这个东西我们并不陌生，之前所编写的函数使用的就是位置参数。<strong>位置参数</strong>，顾名思义，传入函数时每个参数都是通过位置来作区分的。函数调用时，传入的值需按照位置与参数一一对应。</p>
</div><div class="cl-preview-section"><p>比如：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">overspeed_rate</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> current <span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> <span class="token builtin">max</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">max</span>    <span class="token comment"># 超过最大时速，结果为正</span>
    <span class="token keyword">elif</span> current <span class="token operator">&lt;</span> <span class="token builtin">min</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> <span class="token builtin">min</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">min</span>    <span class="token comment"># 超过最小时速，结果为负</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>                        <span class="token comment"># 不超速，结果为 0</span>
</code></pre>
</div><div class="cl-preview-section"><p>这个函数用来判断车辆在高速上行驶时超速的比例。它接受三个参数，<code>current</code> 表示当前时速，<code>max</code> 参数表示当前路段的允许的最大时速，<code>min</code> 表示所允许的最小时速。</p>
</div><div class="cl-preview-section"><p>位置参数需要按位置顺序来传递，否则结果不可预期。</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; overspeed_rate(150, 120, 90)<br>
0.25                                                  # 超过最大时速 25%<br>
&gt;&gt;&gt; overspeed_rate(80, 100, 60)<br>
0                                                       # 不超速<br>
&gt;&gt;&gt; overspeed_rate(60, 120, 90)<br>
-0.3333333333333333                 # 超过最小时速 33.33%</p>
</blockquote>
</div><div class="cl-preview-section"><a id="anchor_1_virtual" class="virtual_anchor"></a><h2 id="参数默认值">参数默认值</h2>
</div><div class="cl-preview-section"><p>前面的函数中，如果最大时速和最小时速比较固定，那么每次函数调用时都输入这个两个参数就显得有些繁琐，这时我们可以使用参数默认值。</p>
</div><div class="cl-preview-section"><p><strong>参数默认值</strong>也就是给参数设置默认值，之后函数调用时便可以不传入这个参数，Python 自动以默认值来填充参数。如果一个有默认值的参数依然被传入了值，那么默认值将会被覆盖。</p>
</div><div class="cl-preview-section"><p><strong>函数定义时</strong>，以 <code>参数=值</code> 来指定参数默认值。如下：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> 函数<span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token operator">=</span>默认值<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre>
</div><div class="cl-preview-section"><p>例如上面的 <code>overspeed_rate</code> 函数， <code>max</code> 和 <code>min</code> 通常比较固定，我们可以使用一个常用值来作为默认值。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">overspeed_rate</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> current <span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> <span class="token builtin">max</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">max</span>
    <span class="token keyword">elif</span> current <span class="token operator">&lt;</span> <span class="token builtin">min</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> <span class="token builtin">min</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">min</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
</code></pre>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; overspeed_rate(192)<br>
0.6<br>
&gt;&gt;&gt; overspeed_rate(45)<br>
-0.5</p>
</blockquote>
</div><div class="cl-preview-section"><a id="anchor_2_virtual" class="virtual_anchor"></a><h2 id="关键字参数">关键字参数</h2>
</div><div class="cl-preview-section"><p>对于 <code>overspeed_rate</code> 函数，我们还可以在<strong>函数调用时</strong>，以 <code>参数名=值</code> 的形式来向指定的参数传入值。</p>
</div><div class="cl-preview-section"><p>如：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python">overspeed_rate<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><p>或者</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python">overspeed_rate<span class="token punctuation">(</span>current<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><p>或者</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python">overspeed_rate<span class="token punctuation">(</span>current<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><p>在调用函数时以 <code>参数名=值</code> 指明要传递的参数，这种以关键字的形式来使用的参数叫做<strong>关键字参数</strong>。</p>
</div><div class="cl-preview-section"><p>使用关键字时甚至可以打乱参数传递次序：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python">overspeed_rate<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> current<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; overspeed_rate(min=80, max=100, current=100)<br>
0</p>
</blockquote>
</div><div class="cl-preview-section"><p>但要注意，关键字参数需要出现在位置参数之后，否则将抛出 <code>SyntaxError</code> 异常：</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; overspeed_rate(100, <strong>max=100, 80</strong>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;  File “”, line 1<br>
SyntaxError: positional argument follows keyword argument</p>
</blockquote>
</div><div class="cl-preview-section"><p>关键字参数的用法还不止如此。</p>
</div><div class="cl-preview-section"><p>当我们在定义函数时，如果参数列表中某个参数使用 <code>**参数名</code> 形式，那么这个参数可以接受一切关键字参数。如下：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">echo</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> <span class="token operator">**</span>keywords<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
    <span class="token keyword">for</span> kw <span class="token keyword">in</span> keywords<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>kw<span class="token punctuation">,</span> <span class="token string">":"</span><span class="token punctuation">,</span> keywords<span class="token punctuation">[</span>kw<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; echo(‘hello’, today=‘2019-09-04’, content=‘function’, section=3.6)<br>
hello<br>
today : 2019-09-04<br>
content : function<br>
section : 3.6</p>
</blockquote>
</div><div class="cl-preview-section"><p>显然，我们并没有在函数定义时定义 <code>today</code>、<code>content</code>、<code>section</code> 参数，但是我们却能接收到它们，这正是 <code>**keywords</code> 发挥了作用。函数会将所有接收到的关键字参数组装成一个字典，并绑定到 <code>keywords</code> 上。验证一下：</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; def foo(**keywords):<br>
…&nbsp;&nbsp;&nbsp;&nbsp;  print(keywords)<br>
…<br>
&gt;&gt;&gt; foo(a=1, b=2, c=3)<br>
{‘a’: 1, ‘b’: 2, ‘c’: 3}</p>
</blockquote>
</div><div class="cl-preview-section"><a id="anchor_3_virtual" class="virtual_anchor"></a><h2 id="任意参数列表">任意参数列表</h2>
</div><div class="cl-preview-section"><p>定义函数时，在参数列表中使用 <code>**参数名</code>，可以接收一切关键字参数。类似的，参数列表中使用 <code>*参数名</code>，就可以接受任意数量的非关键字参数，也就是可变参数。</p>
</div><div class="cl-preview-section"><p>如，计算任意个数的乘积：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token operator">*</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> n <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
        result <span class="token operator">*=</span> n
    <span class="token keyword">return</span> result
</code></pre>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; multiply(1,3,5,7)<br>
105</p>
</blockquote>
</div><div class="cl-preview-section"><p>这个函数能接收任意个参数，这正是 <code>*nums</code> 所发挥的作用。函数所有接收到的非关键字参数组装成一个元组，并绑定到 <code>nums</code> 上。来试验一下：</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; def multiply(*nums):<br>
…&nbsp;&nbsp;&nbsp;&nbsp;  print(nums)<br>
…<br>
&gt;&gt;&gt; multiply(1, 2, 3, 4, 5)<br>
(1, 2, 3, 4, 5)</p>
</blockquote>
</div><div class="cl-preview-section"><a id="anchor_4_virtual" class="virtual_anchor"></a><h2 id="多返回值">多返回值</h2>
</div><div class="cl-preview-section"><p>典型情况下，函数只有一个返回值，但是 Python 也支持函数返回多个返回值。</p>
</div><div class="cl-preview-section"><p>要返回多个返回值，只需在 <code>return</code> 关键字后跟多个值（依次用逗号分隔）。</p>
</div><div class="cl-preview-section"><p>例如：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> datetime
    d <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> d<span class="token punctuation">.</span>year<span class="token punctuation">,</span> d<span class="token punctuation">.</span>month<span class="token punctuation">,</span> d<span class="token punctuation">.</span>day
</code></pre>
</div><div class="cl-preview-section"><p><code>date()</code> 返回了今天的日期的年、月、日。</p>
</div><div class="cl-preview-section"><p>接收函数返回值时，用对应返回值数量的变量来分别接收它们。</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; year, month, day = date()<br>
&gt;&gt;&gt; year<br>
2019<br>
&gt;&gt;&gt; month<br>
9<br>
&gt;&gt;&gt; day<br>
4</p>
</blockquote>
</div><div class="cl-preview-section"><p>函数返回多个返回值是什么原理呢？其实多返回值时，Python 将这些返回值包装成了元组，然后将元组返回。来验证下：</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; date()<br>
(2019, 9, 4)</p>
</blockquote>
</div><div class="cl-preview-section"><p>接收返回值时，<code>year, month, day = date()</code>，这样赋值写法，会将元组解包，分别将元素赋予单独的变量中。即：</p>
</div><div class="cl-preview-section"><blockquote>
<p>&gt;&gt;&gt; year, month, day = (2019, 9, 4)<br>
&gt;&gt;&gt; year<br>
2019<br>
&gt;&gt;&gt; month<br>
9<br>
&gt;&gt;&gt; day<br>
4</p>
</blockquote>
</div></div>
                    </div>
                                            <!-- 买过的阅读 -->
                        <div class="art-next-prev clearfix">
                                                                                                <!-- 已买且开放 或者可以试读 -->
                                    <a href="/read/46/article/826">
                                                                    <div class="prev l clearfix">
                                        <div class="icon l">
                                            <i class="imv2-arrow3_l"></i>
                                        </div>
                                        <p>
                                            17 生成器表达式和列表生成式
                                        </p>
                                    </div>
                                </a>
                                                                                                                            <!-- 已买且开放 或者可以试读 -->
                                    <a href="/read/46/article/828">
                                                                    <div class="next r clearfix">
                                        <p>
                                            19 让你的模子更好用：类进阶
                                        </p>
                                        <div class="icon r">
                                            <i class="imv2-arrow3_r"></i>
                                        </div>

                                    </div>
                                </a>
                                                    </div>
                                    </div>
                <div class="comments-con js-comments-con" id="coments_con">     <div class="number">精选留言 <span class="js-number">0</span></div>     <div class="comments">         <div class="input-fake js-showcommentModal">             欢迎在这里发表留言，作者筛选后可公开显示         </div>                      <div class="noData">                 <p>                     <i class="imv2-error_c"></i>                 </p>                 <p>目前暂无任何讨论</p>             </div>              </div>  </div>

                <div class="bottom-line">
                    <div class="line"></div>
                    <div class="bottom-tip">千学不如一看，千看不如一练</div>
                    <div class="line"></div>
                </div>
            </div>