# 常用批处理汇总

### 设置窗口默认尺寸

``mode con cols=xx line=yy``

* cols表示宽度，最低值为14；
* line表示高度，单位是行，命令的行数；

### 设置窗口标题

``title xxxxx``

xxxxx替换为所需的内容即可；

效果：

![](assets/015/20171029-b6d3cc41.png)

### 设置窗口默认颜色
````
设置默认的控制台前景和背景颜色。

COLOR [attr]

  attr        指定控制台输出的颜色属性。

颜色属性由两个十六进制数字指定 -- 第一个
对应于背景，第二个对应于前景。每个数字
可以为以下任何值:

    0 = 黑色       8 = 灰色
    1 = 蓝色       9 = 淡蓝色
    2 = 绿色       A = 淡绿色
    3 = 浅绿色     B = 淡浅绿色
    4 = 红色       C = 淡红色
    5 = 紫色       D = 淡紫色
    6 = 黄色       E = 淡黄色
    7 = 白色       F = 亮白色

如果没有给定任何参数，此命令会将颜色还原到 CMD.EXE 启动时
的颜色。这个值来自当前控制台
窗口、/T 命令行开关或 DefaultColor 注册表
值。

如果尝试使用相同的
前景和背景颜色来执行
 COLOR 命令，COLOR 命令会将 ERRORLEVEL 设置为 1。

示例: "COLOR fc" 在亮白色上产生淡红色
````

如果没有指定任何参数，该命令将颜色还原到cmd.exe启动时的颜色。

这个值来自当前控制台窗口、/T命令行开关或者DefaultColor注册表值。

如果用相同的前景和背景颜色来执行color命令，会将errorlevel设置为1。

例如：``color fc``在亮白色上产生亮红色。

### 设置不显示命令
``echo off``

off则表示关闭命令显示，后面的命令本身不会被显示，只显示执行结果。但是这一条命令自己还是会被显示出来。

``@echo off``

前面加一个@，则表示这一行的命令不会被显示

为了让程序执行完之后不要立刻关闭窗口，我们会在结尾放一个pause命令，但是这会有一句“按任意键继续…”出现。如果不想让这句出现，则可以这么写：

``pause >nul``

### 获取当前目录

* 当前盘符：``%~d0``
* 当前路径：``%cd%``
* 当前执行命令行：``%0``
* 当前bat文件路径：``%~dp0``
* 当前bat文件短路径：``%~sdp0``
* 当前批处理全路径：``~f0``

### 创建网络链接

其实就是个软链接，把远程服务器的某个共享路径添加到本地磁盘的某个路径下，然后通过本地目录的访问方式来访问这个网络上的目录，便于程序读取固定的路径。

命令：

````
cd /d e:\localdir
mklink /d localdirname \\ip\remotedirname
````

执行完命令之后，会看到本地生成一个新的文件夹，点进去可以和其他本地文件夹一样访问，但不站本地的空间。

如果这个目录内有SVN副本，则可以和本地目录一样直接提交、更新。

但对于这个目录的访问速度，仍取决于本机和被链接的那个服务器之间的网络速度。

### 获取目录下所有文件名

需要用到的命令是：``tree``

**用法：**

1. cd到这个目录或者在这个目录的空白处按住**shift**和右键，选择“在此处打开命令行窗口”。
2. 输入命令：``tree /f >>filelist.txt``
3. 目录下的所有文件名都会被输入到**filelist.txt**中，当然，这里面是包含了目录结构的，如果不需要，则可以用notepad++打开稍作处理即可。

### 查看某IP对应的计算机名
``nbtstat -a ipaddress``


1
